<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ë§ˆìŒì„ ì•Œë¦¬ëŠ” ë¬¸íŒ¨ ë§Œë“¤ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Noto+Sans+KR:wght@400;700&family=Single+Day&display=swap');
        
        .font-handwriting { font-family: 'Gaegu', cursive; }
        .font-neat { font-family: 'Noto Sans KR', sans-serif; }
        .font-cute { font-family: 'Single Day', cursive; }
        
        .sticker {
            cursor: move;
            position: absolute;
            font-size: 2rem;
            user-select: none;
            transition: transform 0.2s;
            z-index: 10;
            line-height: 1;
        }
        
        .sticker:hover {
            transform: scale(1.1);
        }
        
        .dragging {
            opacity: 0.5;
            z-index: 1000;
        }
        
        #doorSign {
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        /* ë¬¸íŒ¨ í¬ê¸° ìŠ¤íƒ€ì¼ */
        .size-small {
            width: 250px;
            min-height: 380px;
            border-radius: 16px;
        }
        
        .size-medium {
            width: 300px;
            min-height: 450px;
            border-radius: 20px;
        }
        
        .size-large {
            width: 350px;
            min-height: 520px;
            border-radius: 24px;
        }
        
        .size-small .text-2xl { font-size: 1.5rem; }
        .size-small .text-xl { font-size: 1.125rem; }
        .size-small .text-base { font-size: 0.875rem; }
        
        .size-large .text-2xl { font-size: 2rem; }
        .size-large .text-xl { font-size: 1.5rem; }
        .size-large .text-base { font-size: 1.125rem; }
        
        /* í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ */
        .border-style-solid {
            border-style: solid;
        }
        
        .border-style-dashed {
            border-style: dashed;
        }
        
        .border-style-dotted {
            border-style: dotted;
        }
        
        .border-style-double {
            border-style: double;
            border-width: 6px;
        }
        
        .color-option, .size-option, .border-option, .template-option {
            transition: all 0.2s;
        }
        
        .color-option:hover, .size-option:hover, .border-option:hover, .template-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.selected, .size-option.selected, .border-option.selected {
            ring: 4;
            ring-offset: 2;
        }
        
        /* ì¸ì‡„ìš© ìŠ¤íƒ€ì¼ */
        @media print {
            body {
                background: white !important;
            }
            .no-print {
                display: none !important;
            }
            .print-only {
                display: block !important;
            }
            #printArea {
                display: grid !important;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
                padding: 20px;
            }
            .print-sign {
                break-inside: avoid;
                page-break-inside: avoid;
            }
        }
        
        .print-only {
            display: none;
        }
        
        /* íƒ­ ìŠ¤íƒ€ì¼ */
        .tab-button {
            @apply px-4 py-2 rounded-t-lg font-medium transition-colors;
        }
        .tab-button.active {
            @apply bg-white text-purple-600 border-b-2 border-white;
        }
        .tab-button:not(.active) {
            @apply bg-purple-100 text-purple-600 hover:bg-purple-200;
        }
        .tab-content {
            @apply hidden;
        }
        .tab-content.active {
            @apply block;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-100 to-pink-100 min-h-screen p-4">
    <div class="max-w-6xl mx-auto no-print">
        <!-- í—¤ë” -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-purple-800 mb-2">ğŸª§ ë‚´ ë§ˆìŒì„ ì•Œë¦¬ëŠ” ë¬¸íŒ¨ ë§Œë“¤ê¸°</h1>
            <p class="text-lg text-purple-600">ë‚˜ë§Œì˜ íŠ¹ë³„í•œ ë¬¸íŒ¨ë¥¼ ë§Œë“¤ì–´ ë‚´ ë§ˆìŒì„ í‘œí˜„í•´ìš”!</p>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
            <!-- ì™¼ìª½: ê¾¸ë¯¸ê¸° ë„êµ¬ -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <!-- íƒ­ ë©”ë‰´ -->
                <div class="flex space-x-2 mb-6 border-b">
                    <button class="tab-button active" onclick="switchTab('design')">ğŸ¨ ë””ìì¸</button>
                    <button class="tab-button" onclick="switchTab('content')">ğŸ“ ë‚´ìš©</button>
                    <button class="tab-button" onclick="switchTab('template')">ğŸ“‹ í…œí”Œë¦¿</button>
                </div>

                <!-- ë””ìì¸ íƒ­ -->
                <div id="design-tab" class="tab-content active space-y-6">
                    <!-- ë¬¸íŒ¨ í¬ê¸° ì„ íƒ -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                            <span class="text-2xl mr-2">ğŸ“</span> ë¬¸íŒ¨ í¬ê¸°ë¥¼ ê³¨ë¼ìš”
                        </h3>
                        <div class="grid grid-cols-3 gap-3">
                            <div class="size-option cursor-pointer text-center p-3 border-2 border-gray-200 rounded-lg hover:border-purple-400" onclick="selectSize('small')">
                                <div class="w-14 h-20 bg-purple-200 rounded mx-auto mb-2"></div>
                                <span class="text-sm font-medium">ì‘ì€ í¬ê¸°</span>
                            </div>
                            <div class="size-option cursor-pointer text-center p-3 border-2 border-gray-200 rounded-lg hover:border-purple-400 ring-4 ring-purple-400 bg-purple-50" onclick="selectSize('medium')">
                                <div class="w-16 h-24 bg-purple-200 rounded mx-auto mb-2"></div>
                                <span class="text-sm font-medium">ë³´í†µ í¬ê¸°</span>
                            </div>
                            <div class="size-option cursor-pointer text-center p-3 border-2 border-gray-200 rounded-lg hover:border-purple-400" onclick="selectSize('large')">
                                <div class="w-18 h-28 bg-purple-200 rounded mx-auto mb-2"></div>
                                <span class="text-sm font-medium">í° í¬ê¸°</span>
                            </div>
                        </div>
                    </div>

                    <!-- ë°°ê²½ìƒ‰ ì„ íƒ -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                            <span class="text-2xl mr-2">ğŸ¨</span> ë°°ê²½ìƒ‰ì„ ê³¨ë¼ìš”
                        </h3>
                        <div class="grid grid-cols-6 gap-2" id="colorPalette">
                            <div class="color-option w-12 h-12 bg-pink-200 rounded-lg cursor-pointer ring-4 ring-purple-400" data-color="bg-pink-200"></div>
                            <div class="color-option w-12 h-12 bg-purple-200 rounded-lg cursor-pointer" data-color="bg-purple-200"></div>
                            <div class="color-option w-12 h-12 bg-blue-200 rounded-lg cursor-pointer" data-color="bg-blue-200"></div>
                            <div class="color-option w-12 h-12 bg-green-200 rounded-lg cursor-pointer" data-color="bg-green-200"></div>
                            <div class="color-option w-12 h-12 bg-yellow-200 rounded-lg cursor-pointer" data-color="bg-yellow-200"></div>
                            <div class="color-option w-12 h-12 bg-orange-200 rounded-lg cursor-pointer" data-color="bg-orange-200"></div>
                        </div>
                    </div>

                    <!-- í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                            <span class="text-2xl mr-2">ğŸ–¼ï¸</span> í…Œë‘ë¦¬ë¥¼ ê¾¸ë©°ìš”
                        </h3>
                        <div class="space-y-3">
                            <div>
                                <label class="text-sm font-medium text-gray-600">í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼</label>
                                <div class="grid grid-cols-4 gap-2 mt-1">
                                    <button class="border-option p-2 bg-gray-50 rounded hover:bg-gray-100" onclick="selectBorderStyle('solid')">
                                        <div class="h-8 border-2 border-gray-400 border-solid rounded"></div>
                                        <span class="text-xs">ì‹¤ì„ </span>
                                    </button>
                                    <button class="border-option p-2 bg-gray-50 rounded hover:bg-gray-100" onclick="selectBorderStyle('dashed')">
                                        <div class="h-8 border-2 border-gray-400 border-dashed rounded"></div>
                                        <span class="text-xs">ì ì„ </span>
                                    </button>
                                    <button class="border-option p-2 bg-gray-50 rounded hover:bg-gray-100" onclick="selectBorderStyle('dotted')">
                                        <div class="h-8 border-2 border-gray-400 border-dotted rounded"></div>
                                        <span class="text-xs">ì </span>
                                    </button>
                                    <button class="border-option p-2 bg-gray-50 rounded hover:bg-gray-100" onclick="selectBorderStyle('double')">
                                        <div class="h-8 border-4 border-gray-400 border-double rounded"></div>
                                        <span class="text-xs">ì´ì¤‘ì„ </span>
                                    </button>
                                </div>
                            </div>
                            <div>
                                <label class="text-sm font-medium text-gray-600">í…Œë‘ë¦¬ ìƒ‰ìƒ</label>
                                <div class="grid grid-cols-6 gap-2 mt-1">
                                    <div class="w-10 h-10 bg-gray-800 rounded cursor-pointer" onclick="selectBorderColor('border-gray-800')"></div>
                                    <div class="w-10 h-10 bg-purple-600 rounded cursor-pointer" onclick="selectBorderColor('border-purple-600')"></div>
                                    <div class="w-10 h-10 bg-pink-600 rounded cursor-pointer" onclick="selectBorderColor('border-pink-600')"></div>
                                    <div class="w-10 h-10 bg-blue-600 rounded cursor-pointer" onclick="selectBorderColor('border-blue-600')"></div>
                                    <div class="w-10 h-10 bg-green-600 rounded cursor-pointer" onclick="selectBorderColor('border-green-600')"></div>
                                    <div class="w-10 h-10 bg-yellow-600 rounded cursor-pointer" onclick="selectBorderColor('border-yellow-600')"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ê¸€ì”¨ì²´ ì„ íƒ -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                            <span class="text-2xl mr-2">âœï¸</span> ê¸€ì”¨ì²´ë¥¼ ê³¨ë¼ìš”
                        </h3>
                        <div class="space-y-2">
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                                <input type="radio" name="font" value="font-handwriting" checked class="mr-3">
                                <span class="font-handwriting text-lg">ì†ê¸€ì”¨ì²´</span>
                            </label>
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                                <input type="radio" name="font" value="font-neat" class="mr-3">
                                <span class="font-neat text-lg">ë°˜ë“¯í•œì²´</span>
                            </label>
                            <label class="flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                                <input type="radio" name="font" value="font-cute" class="mr-3">
                                <span class="font-cute text-lg">ê·€ì—¬ìš´ì²´</span>
                            </label>
                        </div>
                    </div>

                    <!-- ìŠ¤í‹°ì»¤ ì„ íƒ -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-3 flex items-center">
                            <span class="text-2xl mr-2">ğŸŒŸ</span> ìŠ¤í‹°ì»¤ë¥¼ ë¶™ì—¬ìš” (í´ë¦­í•˜ë©´ ë¬¸íŒ¨ì— ë‚˜íƒ€ë‚˜ìš”!)
                        </h3>
                        <div class="grid grid-cols-8 gap-2 bg-gray-50 p-3 rounded-lg" id="stickerPalette">
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ˜Š</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ˜´</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ¤«</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ˜</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ“š</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ®</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸµ</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">âš½</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ¨</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ’¤</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">âœ¨</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">â¤ï¸</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸŒˆ</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ•</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ¶</span>
                            <span class="text-2xl cursor-pointer hover:scale-110 transition-transform">ğŸ±</span>
                        </div>
                    </div>
                </div>

                <!-- ë‚´ìš© íƒ­ -->
                <div id="content-tab" class="tab-content space-y-4">
                    <h3 class="text-lg font-bold text-gray-800 flex items-center">
                        <span class="text-2xl mr-2">ğŸ“</span> ë¬¸íŒ¨ ë‚´ìš©ì„ ì¨ìš”
                    </h3>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">ğŸ  ìš°ë¦¬ ì§‘ ì´ë¦„ (ë¬¸íŒ¨ ì£¼ì¸)</label>
                        <input type="text" id="ownerInput" placeholder="ì˜ˆ) í–‡ì‚´ì´ë„¤ ì§‘, ê¹€ë¯¼ì¤€ì˜ ë°©" 
                               class="w-full p-3 border-2 border-purple-200 rounded-lg focus:border-purple-400 focus:outline-none">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">â‘  ë‚´ ì´ë¦„ ë˜ëŠ” ë³„ëª…</label>
                        <input type="text" id="nameInput" placeholder="ì˜ˆ) í–‡ì‚´ì´, ì±…ë²Œë ˆ" 
                               class="w-full p-3 border-2 border-purple-200 rounded-lg focus:border-purple-400 focus:outline-none">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">â‘¡ ì§€ê¸ˆ ë‚´ ë§ˆìŒì€...</label>
                        <input type="text" id="moodInput" placeholder="ì˜ˆ) í˜¼ìë§Œì˜ ì‹œê°„ì´ í•„ìš”í•´ìš”" 
                               class="w-full p-3 border-2 border-purple-200 rounded-lg focus:border-purple-400 focus:outline-none">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">â‘¢ ë‚˜ì—ê²Œ ë¶€íƒí•´ìš”</label>
                        <input type="text" id="requestInput" placeholder="ì˜ˆ) ë…¸í¬ëŠ” í•„ìˆ˜!" 
                               class="w-full p-3 border-2 border-purple-200 rounded-lg focus:border-purple-400 focus:outline-none">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">â‘£ ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” í•œë§ˆë””</label>
                        <input type="text" id="mottoInput" placeholder="ì˜ˆ) ì˜¤ëŠ˜ë„ í™”ì´íŒ…!" 
                               class="w-full p-3 border-2 border-purple-200 rounded-lg focus:border-purple-400 focus:outline-none">
                    </div>
                    
                    <div id="extraField1" class="hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-1">â‘¤ ì˜¤ëŠ˜ì˜ ëª©í‘œ</label>
                        <input type="text" id="extraInput1" placeholder="ì˜ˆ) ìˆ˜í•™ ë¬¸ì œì§‘ 10ìª½ í’€ê¸°" 
                               class="w-full p-3 border-2 border-purple-200 rounded-lg focus:border-purple-400 focus:outline-none">
                    </div>
                    
                    <div id="extraField2" class="hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-1">â‘¥ ì¹œêµ¬ì—ê²Œ í•œë§ˆë””</label>
                        <input type="text" id="extraInput2" placeholder="ì˜ˆ) ê°™ì´ ë†€ì! ì¬ë¯¸ìˆëŠ” ê²Œì„ ì¤€ë¹„í–ˆì–´" 
                               class="w-full p-3 border-2 border-purple-200 rounded-lg focus:border-purple-400 focus:outline-none">
                    </div>
                </div>

                <!-- í…œí”Œë¦¿ íƒ­ -->
                <div id="template-tab" class="tab-content">
                    <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                        <span class="text-2xl mr-2">ğŸ“‹</span> í…œí”Œë¦¿ì„ ì„ íƒí•´ìš”
                    </h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="template-option border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:border-purple-400" 
                             onclick="applyTemplate('study')">
                            <h4 class="font-bold text-purple-600 mb-2">ğŸ“š ê³µë¶€ì¤‘ì´ì—ìš”</h4>
                            <p class="text-sm text-gray-600">ì¡°ìš©íˆ ì§‘ì¤‘í•˜ê³  ìˆì–´ìš”</p>
                        </div>
                        <div class="template-option border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:border-purple-400" 
                             onclick="applyTemplate('rest')">
                            <h4 class="font-bold text-green-600 mb-2">ğŸ˜´ ì‰¬ëŠ” ì¤‘ì´ì—ìš”</h4>
                            <p class="text-sm text-gray-600">ì ì‹œ íœ´ì‹ì´ í•„ìš”í•´ìš”</p>
                        </div>
                        <div class="template-option border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:border-purple-400" 
                             onclick="applyTemplate('play')">
                            <h4 class="font-bold text-orange-600 mb-2">ğŸ® ë†€ì´ ì‹œê°„ì´ì—ìš”</h4>
                            <p class="text-sm text-gray-600">í•¨ê»˜ ë†€ì•„ìš”!</p>
                        </div>
                        <div class="template-option border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:border-purple-400" 
                             onclick="applyTemplate('welcome')">
                            <h4 class="font-bold text-pink-600 mb-2">ğŸŒˆ í™˜ì˜í•´ìš”</h4>
                            <p class="text-sm text-gray-600">ì–¸ì œë“ ì§€ ë†€ëŸ¬ì˜¤ì„¸ìš”</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½: ë¬¸íŒ¨ ë¯¸ë¦¬ë³´ê¸° -->
            <div class="bg-white rounded-2xl shadow-lg p-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                    <span class="text-2xl mr-2">ğŸ‘€</span> ë‚´ ë¬¸íŒ¨ ë¯¸ë¦¬ë³´ê¸°
                </h3>
                
                <div class="flex justify-center items-center" style="min-height: 500px;">
                    <div id="doorSign" class="bg-pink-200 p-6 font-handwriting size-medium border-4 border-solid border-gray-800">
                        <div class="text-center space-y-3 h-full flex flex-col">
                            <div class="bg-white bg-opacity-80 rounded-lg px-4 py-3 mb-2">
                                <h2 id="displayOwner" class="text-xl font-bold text-gray-800 leading-tight">ë¬¸íŒ¨ ì£¼ì¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</h2>
                            </div>
                            
                            <h3 id="displayName" class="text-2xl font-bold text-gray-800 mb-3 px-2">ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</h3>
                            
                            <div class="space-y-2 flex-grow">
                                <div class="bg-white bg-opacity-70 rounded-lg p-3 flex flex-col justify-center">
                                    <p class="text-xs text-gray-600 mb-1">ì§€ê¸ˆ ë‚´ ë§ˆìŒì€...</p>
                                    <p id="displayMood" class="text-base text-gray-800 leading-tight">-</p>
                                </div>
                                
                                <div class="bg-white bg-opacity-70 rounded-lg p-3 flex flex-col justify-center">
                                    <p class="text-xs text-gray-600 mb-1">ë‚˜ì—ê²Œ ë¶€íƒí•´ìš”</p>
                                    <p id="displayRequest" class="text-base text-gray-800 leading-tight">-</p>
                                </div>
                                
                                <div class="bg-white bg-opacity-70 rounded-lg p-3 flex flex-col justify-center">
                                    <p class="text-xs text-gray-600 mb-1">ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” í•œë§ˆë””</p>
                                    <p id="displayMotto" class="text-base text-gray-800 leading-tight">-</p>
                                </div>
                                
                                <div id="displayExtra1" class="bg-white bg-opacity-70 rounded-lg p-3 flex flex-col justify-center hidden">
                                    <p class="text-xs text-gray-600 mb-1">ì˜¤ëŠ˜ì˜ ëª©í‘œ</p>
                                    <p id="displayExtraText1" class="text-base text-gray-800 leading-tight">-</p>
                                </div>
                                
                                <div id="displayExtra2" class="bg-white bg-opacity-70 rounded-lg p-3 flex flex-col justify-center hidden">
                                    <p class="text-xs text-gray-600 mb-1">ì¹œêµ¬ì—ê²Œ í•œë§ˆë””</p>
                                    <p id="displayExtraText2" class="text-base text-gray-800 leading-tight">-</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì €ì¥ ë²„íŠ¼ -->
                <div class="flex flex-wrap gap-3 mt-6">
                    <button onclick="saveAsImage()" 
                            class="flex-1 bg-purple-500 text-white py-3 px-4 rounded-lg font-bold hover:bg-purple-600 transition-colors flex items-center justify-center">
                        <span class="text-xl mr-2">ğŸ“¸</span> PNGë¡œ ì €ì¥
                    </button>
                    <button onclick="saveAsPDF()" 
                            class="flex-1 bg-blue-500 text-white py-3 px-4 rounded-lg font-bold hover:bg-blue-600 transition-colors flex items-center justify-center">
                        <span class="text-xl mr-2">ğŸ“„</span> PDFë¡œ ì €ì¥
                    </button>
                    <button onclick="addToPrintList()" 
                            class="flex-1 bg-green-500 text-white py-3 px-4 rounded-lg font-bold hover:bg-green-600 transition-colors flex items-center justify-center">
                        <span class="text-xl mr-2">â•</span> ì¸ì‡„ ëª©ë¡ì— ì¶”ê°€
                    </button>
                    <button onclick="resetSign()" 
                            class="bg-gray-500 text-white py-3 px-4 rounded-lg font-bold hover:bg-gray-600 transition-colors flex items-center justify-center">
                        <span class="text-xl mr-2">ğŸ”„</span> ìƒˆë¡œ ë§Œë“¤ê¸°
                    </button>
                </div>

                <!-- ì¸ì‡„ ëª©ë¡ -->
                <div id="printListSection" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
                    <h4 class="font-bold text-gray-800 mb-2">ğŸ“‹ ì¸ì‡„ ëª©ë¡ (<span id="printCount">0</span>ê°œ)</h4>
                    <div id="printPreviewList" class="space-y-2 mb-3"></div>
                    <button onclick="printAll()" class="w-full bg-purple-500 text-white py-2 rounded-lg font-bold hover:bg-purple-600">
                        ğŸ–¨ï¸ ì „ì²´ ì¸ì‡„í•˜ê¸°
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ì¸ì‡„ ì˜ì—­ -->
    <div id="printArea" class="print-only"></div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let selectedFont = 'font-handwriting';
        let selectedSize = 'medium';
        let selectedBorderStyle = 'solid';
        let selectedBorderColor = 'border-gray-800';
        let stickerCount = 0;
        let printList = [];

        // í…œí”Œë¦¿ ë°ì´í„°
        const templates = {
            study: {
                owner: 'ê³µë¶€ë°©',
                name: 'ì—´ê³µì¤‘ì¸ í•™ìƒ',
                mood: 'ì§‘ì¤‘í•˜ê³  ìˆì–´ìš” ğŸ“š',
                request: 'ì¡°ìš©íˆ í•´ì£¼ì„¸ìš”',
                motto: 'ì—´ê³µ! í™”ì´íŒ…!',
                bgColor: 'bg-blue-200',
                borderColor: 'border-blue-600'
            },
            rest: {
                owner: 'íœ´ì‹ê³µê°„',
                name: 'ì‰¬ëŠ” ì¤‘',
                mood: 'ì ì‹œ ì‰¬ê³  ìˆì–´ìš” ğŸ˜´',
                request: '30ë¶„ë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”',
                motto: 'ì¶©ì „ ì¤‘... ğŸ’¤',
                bgColor: 'bg-green-200',
                borderColor: 'border-green-600'
            },
            play: {
                owner: 'ë†€ì´ë°©',
                name: 'ê²Œì„ ë§ˆìŠ¤í„°',
                mood: 'ì‹ ë‚˜ê²Œ ë†€ê³  ìˆì–´ìš” ğŸ®',
                request: 'ê°™ì´ ë†€ë˜?',
                motto: 'ì¦ê±°ìš´ ì‹œê°„!',
                bgColor: 'bg-yellow-200',
                borderColor: 'border-yellow-600'
            },
            welcome: {
                owner: 'ìš°ë¦¬ì§‘',
                name: 'ì¹œì ˆí•œ ì£¼ì¸',
                mood: 'ê¸°ë¶„ì´ ì¢‹ì•„ìš” ğŸŒˆ',
                request: 'í¸í•˜ê²Œ ë“¤ì–´ì˜¤ì„¸ìš”',
                motto: 'ì¢‹ì€ í•˜ë£¨ ë˜ì„¸ìš”!',
                bgColor: 'bg-pink-200',
                borderColor: 'border-pink-600'
            }
        };

        // íƒ­ ì „í™˜
        function switchTab(tabName) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ê³¼ ë‚´ìš© ë¹„í™œì„±í™”
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // ì„ íƒëœ íƒ­ í™œì„±í™”
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // ë¬¸íŒ¨ í¬ê¸° ì„ íƒ
        function selectSize(size) {
            selectedSize = size;
            const doorSign = document.getElementById('doorSign');
            
            // ëª¨ë“  í¬ê¸° í´ë˜ìŠ¤ ì œê±°
            doorSign.classList.remove('size-small', 'size-medium', 'size-large');
            
            // ìƒˆ í¬ê¸° ì¶”ê°€
            doorSign.classList.add(`size-${size}`);
            
            // ì„ íƒ í‘œì‹œ
            document.querySelectorAll('.size-option').forEach(opt => opt.classList.remove('ring-4', 'ring-purple-400', 'bg-purple-50'));
            event.currentTarget.classList.add('ring-4', 'ring-purple-400', 'bg-purple-50');
            
            // í¬ê¸°ì— ë”°ë¼ ì¶”ê°€ í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€
            const extraField1 = document.getElementById('extraField1');
            const extraField2 = document.getElementById('extraField2');
            const displayExtra1 = document.getElementById('displayExtra1');
            const displayExtra2 = document.getElementById('displayExtra2');
            
            if (size === 'small') {
                // ì‘ì€ í¬ê¸°: ì¶”ê°€ í•„ë“œ ìˆ¨ê¹€
                extraField1.classList.add('hidden');
                extraField2.classList.add('hidden');
                displayExtra1.classList.add('hidden');
                displayExtra2.classList.add('hidden');
            } else if (size === 'medium') {
                // ë³´í†µ í¬ê¸°: 1ê°œ ì¶”ê°€ í•„ë“œ
                extraField1.classList.remove('hidden');
                extraField2.classList.add('hidden');
                displayExtra1.classList.remove('hidden');
                displayExtra2.classList.add('hidden');
            } else if (size === 'large') {
                // í° í¬ê¸°: 2ê°œ ì¶”ê°€ í•„ë“œ
                extraField1.classList.remove('hidden');
                extraField2.classList.remove('hidden');
                displayExtra1.classList.remove('hidden');
                displayExtra2.classList.remove('hidden');
            }
        }

        // í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ ì„ íƒ
        function selectBorderStyle(style) {
            selectedBorderStyle = style;
            const doorSign = document.getElementById('doorSign');
            
            // ëª¨ë“  í…Œë‘ë¦¬ ìŠ¤íƒ€ì¼ ì œê±°
            doorSign.classList.remove('border-solid', 'border-dashed', 'border-dotted', 'border-double');
            
            // ìƒˆ ìŠ¤íƒ€ì¼ ì¶”ê°€
            doorSign.classList.add(`border-${style}`);
            
            // ì„ íƒ í‘œì‹œ
            document.querySelectorAll('.border-option').forEach(opt => opt.classList.remove('ring-2', 'ring-purple-400'));
            event.currentTarget.classList.add('ring-2', 'ring-purple-400');
        }

        // í…Œë‘ë¦¬ ìƒ‰ìƒ ì„ íƒ
        function selectBorderColor(color) {
            selectedBorderColor = color;
            const doorSign = document.getElementById('doorSign');
            
            // ê¸°ì¡´ í…Œë‘ë¦¬ ìƒ‰ìƒ ì œê±°
            doorSign.className = doorSign.className.replace(/border-\w+-\d+/g, '');
            
            // ìƒˆ ìƒ‰ìƒ ì¶”ê°€
            doorSign.classList.add(color);
        }

        // í…œí”Œë¦¿ ì ìš©
        function applyTemplate(templateName) {
            const template = templates[templateName];
            
            // ì…ë ¥ í•„ë“œ ì±„ìš°ê¸°
            document.getElementById('ownerInput').value = template.owner;
            document.getElementById('nameInput').value = template.name;
            document.getElementById('moodInput').value = template.mood;
            document.getElementById('requestInput').value = template.request;
            document.getElementById('mottoInput').value = template.motto;
            
            // í‘œì‹œ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            document.getElementById('displayOwner').textContent = template.owner;
            document.getElementById('displayName').textContent = template.name;
            document.getElementById('displayMood').textContent = template.mood;
            document.getElementById('displayRequest').textContent = template.request;
            document.getElementById('displayMotto').textContent = template.motto;
            
            // ë°°ê²½ìƒ‰ ì ìš©
            const doorSign = document.getElementById('doorSign');
            doorSign.className = doorSign.className.replace(/bg-\w+-200/g, '');
            doorSign.classList.add(template.bgColor);
            
            // í…Œë‘ë¦¬ ìƒ‰ìƒ ì ìš©
            selectBorderColor(template.borderColor);
            
            // í…œí”Œë¦¿ ì ìš© ë¶€ë¶„ì—ì„œ ëª¨ì–‘(shape) ëŒ€ì‹  í¬ê¸°(size) ì„¤ì •
            // ëª¨ë“  í…œí”Œë¦¿ì€ medium í¬ê¸°ë¡œ ì„¤ì •
            selectedSize = 'medium';
            const doorSignForSize = document.getElementById('doorSign');
            doorSignForSize.classList.remove('size-small', 'size-medium', 'size-large');
            doorSignForSize.classList.add('size-medium');
            
            // ëª¨ë“  í…œí”Œë¦¿ ì„ íƒ í•´ì œ
            document.querySelectorAll('.template-option').forEach(opt => {
                opt.classList.remove('border-purple-400', 'bg-purple-50');
                opt.classList.add('border-gray-200');
            });
            
            // í˜„ì¬ ì„ íƒëœ í…œí”Œë¦¿ í‘œì‹œ
            event.currentTarget.classList.remove('border-gray-200');
            event.currentTarget.classList.add('border-purple-400', 'bg-purple-50');
            
            // ë””ìì¸ íƒ­ìœ¼ë¡œ ì „í™˜
            document.querySelectorAll('.tab-button')[0].click();
        }

        // ì¸ì‡„ ëª©ë¡ì— ì¶”ê°€
        function addToPrintList() {
            const doorSign = document.getElementById('doorSign');
            
            // í˜„ì¬ ë¬¸íŒ¨ì˜ HTMLì„ ë³µì‚¬
            const signClone = doorSign.cloneNode(true);
            signClone.id = 'print-sign-' + printList.length;
            
            // ì¸ì‡„ ëª©ë¡ì— ì¶”ê°€
            printList.push(signClone.outerHTML);
            
            // UI ì—…ë°ì´íŠ¸
            updatePrintList();
            
            alert('ì¸ì‡„ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ì¸ì‡„ ëª©ë¡ ì—…ë°ì´íŠ¸
        function updatePrintList() {
            const printListSection = document.getElementById('printListSection');
            const printCount = document.getElementById('printCount');
            const printPreviewList = document.getElementById('printPreviewList');
            
            if (printList.length > 0) {
                printListSection.classList.remove('hidden');
                printCount.textContent = printList.length;
                
                // ë¯¸ë¦¬ë³´ê¸° ëª©ë¡ í‘œì‹œ
                printPreviewList.innerHTML = printList.map((sign, index) => `
                    <div class="flex justify-between items-center bg-white p-2 rounded">
                        <span>ë¬¸íŒ¨ ${index + 1}</span>
                        <button onclick="removeFromPrintList(${index})" class="text-red-500 hover:text-red-700">
                            âŒ ì‚­ì œ
                        </button>
                    </div>
                `).join('');
            } else {
                printListSection.classList.add('hidden');
            }
        }

        // ì¸ì‡„ ëª©ë¡ì—ì„œ ì œê±°
        function removeFromPrintList(index) {
            printList.splice(index, 1);
            updatePrintList();
        }

        // ì „ì²´ ì¸ì‡„
        function printAll() {
            if (printList.length === 0) {
                alert('ì¸ì‡„í•  ë¬¸íŒ¨ê°€ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            const printArea = document.getElementById('printArea');
            printArea.innerHTML = printList.map((sign, index) => `
                <div class="print-sign" style="max-width: 400px;">
                    ${sign}
                </div>
            `).join('');
            
            window.print();
        }

        // ë°°ê²½ìƒ‰ ì„ íƒ
        document.querySelectorAll('.color-option').forEach(color => {
            color.addEventListener('click', function() {
                const doorSign = document.getElementById('doorSign');
                const newColor = this.dataset.color;
                
                // ê¸°ì¡´ ë°°ê²½ìƒ‰ í´ë˜ìŠ¤ ì œê±°
                doorSign.className = doorSign.className.replace(/bg-\w+-200/g, '');
                // ìƒˆ ë°°ê²½ìƒ‰ ì¶”ê°€
                doorSign.classList.add(newColor);
                
                // ì„ íƒëœ ìƒ‰ìƒ í‘œì‹œ
                document.querySelectorAll('.color-option').forEach(c => c.classList.remove('ring-4', 'ring-purple-400'));
                this.classList.add('ring-4', 'ring-purple-400');
            });
        });
        
        // ê¸€ì”¨ì²´ ì„ íƒ
        document.querySelectorAll('input[name="font"]').forEach(radio => {
            radio.addEventListener('change', function() {
                selectedFont = this.value;
                const doorSign = document.getElementById('doorSign');
                
                // ê¸°ì¡´ í°íŠ¸ í´ë˜ìŠ¤ ì œê±°
                doorSign.classList.remove('font-handwriting', 'font-neat', 'font-cute');
                // ìƒˆ í°íŠ¸ ì¶”ê°€
                doorSign.classList.add(selectedFont);
            });
        });
        
        // ìŠ¤í‹°ì»¤ ì¶”ê°€
        document.querySelectorAll('#stickerPalette span').forEach(sticker => {
            sticker.addEventListener('click', function() {
                if (stickerCount >= 5) {
                    alert('ìŠ¤í‹°ì»¤ëŠ” ìµœëŒ€ 5ê°œê¹Œì§€ ë¶™ì¼ ìˆ˜ ìˆì–´ìš”!');
                    return;
                }
                
                const doorSign = document.getElementById('doorSign');
                const newSticker = document.createElement('div');
                newSticker.className = 'sticker';
                newSticker.textContent = this.textContent;
                newSticker.style.left = Math.random() * (doorSign.offsetWidth - 50) + 'px';
                newSticker.style.top = Math.random() * (doorSign.offsetHeight - 50) + 'px';
                
                // ë“œë˜ê·¸ ê¸°ëŠ¥ ì¶”ê°€
                makeDraggable(newSticker);
                
                // ë”ë¸”í´ë¦­ìœ¼ë¡œ ì‚­ì œ
                newSticker.addEventListener('dblclick', function() {
                    this.remove();
                    stickerCount--;
                });
                
                doorSign.appendChild(newSticker);
                stickerCount++;
            });
        });
        
        // ë“œë˜ê·¸ ê¸°ëŠ¥
        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            element.onmousedown = dragMouseDown;
            element.ontouchstart = dragTouchStart;
            
            function dragMouseDown(e) {
                e = e || window.event;
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
                element.classList.add('dragging');
            }
            
            function dragTouchStart(e) {
                e = e || window.event;
                pos3 = e.touches[0].clientX;
                pos4 = e.touches[0].clientY;
                document.ontouchend = closeDragElement;
                document.ontouchmove = elementTouchDrag;
                element.classList.add('dragging');
            }
            
            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                
                const newTop = element.offsetTop - pos2;
                const newLeft = element.offsetLeft - pos1;
                const parent = element.parentElement;
                
                // ê²½ê³„ ì²´í¬
                if (newTop >= 0 && newTop <= parent.offsetHeight - element.offsetHeight) {
                    element.style.top = newTop + "px";
                }
                if (newLeft >= 0 && newLeft <= parent.offsetWidth - element.offsetWidth) {
                    element.style.left = newLeft + "px";
                }
            }
            
            function elementTouchDrag(e) {
                e = e || window.event;
                const touch = e.touches[0];
                pos1 = pos3 - touch.clientX;
                pos2 = pos4 - touch.clientY;
                pos3 = touch.clientX;
                pos4 = touch.clientY;
                
                const newTop = element.offsetTop - pos2;
                const newLeft = element.offsetLeft - pos1;
                const parent = element.parentElement;
                
                if (newTop >= 0 && newTop <= parent.offsetHeight - element.offsetHeight) {
                    element.style.top = newTop + "px";
                }
                if (newLeft >= 0 && newLeft <= parent.offsetWidth - element.offsetWidth) {
                    element.style.left = newLeft + "px";
                }
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
                document.ontouchend = null;
                document.ontouchmove = null;
                element.classList.remove('dragging');
            }
        }
        
        // í…ìŠ¤íŠ¸ ì…ë ¥ ì‹¤ì‹œê°„ ë°˜ì˜
        document.getElementById('ownerInput').addEventListener('input', function() {
            const display = document.getElementById('displayOwner');
            display.textContent = this.value || 'ë¬¸íŒ¨ ì£¼ì¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
        });
        
        document.getElementById('nameInput').addEventListener('input', function() {
            const display = document.getElementById('displayName');
            display.textContent = this.value || 'ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
        });
        
        document.getElementById('moodInput').addEventListener('input', function() {
            const display = document.getElementById('displayMood');
            display.textContent = this.value || '-';
        });
        
        document.getElementById('requestInput').addEventListener('input', function() {
            const display = document.getElementById('displayRequest');
            display.textContent = this.value || '-';
        });
        
        document.getElementById('mottoInput').addEventListener('input', function() {
            const display = document.getElementById('displayMotto');
            display.textContent = this.value || '-';
        });
        
        document.getElementById('extraInput1').addEventListener('input', function() {
            const display = document.getElementById('displayExtraText1');
            display.textContent = this.value || '-';
        });
        
        document.getElementById('extraInput2').addEventListener('input', function() {
            const display = document.getElementById('displayExtraText2');
            display.textContent = this.value || '-';
        });
        
        // ì´ë¯¸ì§€ë¡œ ì €ì¥
        async function saveAsImage() {
            const doorSign = document.getElementById('doorSign');
            
            try {
                const canvas = await html2canvas(doorSign, {
                    backgroundColor: null,
                    scale: 2,
                    logging: false
                });
                
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'ë‚˜ì˜_ë¬¸íŒ¨_' + new Date().getTime() + '.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                });
            } catch (error) {
                console.error('ì´ë¯¸ì§€ ì €ì¥ ì¤‘ ì˜¤ë¥˜:', error);
                alert('ì´ë¯¸ì§€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // PDFë¡œ ì €ì¥
        async function saveAsPDF() {
            const doorSign = document.getElementById('doorSign');
            
            try {
                const canvas = await html2canvas(doorSign, {
                    backgroundColor: null,
                    scale: 2,
                    logging: false
                });
                
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jspdf.jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });
                
                const imgWidth = 170;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                const x = (210 - imgWidth) / 2;
                const y = 20;
                
                pdf.addImage(imgData, 'PNG', x, y, imgWidth, imgHeight);
                pdf.save('ë‚˜ì˜_ë¬¸íŒ¨_' + new Date().getTime() + '.pdf');
            } catch (error) {
                console.error('PDF ì €ì¥ ì¤‘ ì˜¤ë¥˜:', error);
                alert('PDF ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // ì´ˆê¸°í™”
        function resetSign() {
            if (confirm('ì •ë§ ìƒˆë¡œ ë§Œë“¤ê¹Œìš”? ì§€ê¸ˆê¹Œì§€ ë§Œë“  ë¬¸íŒ¨ëŠ” ì‚¬ë¼ì ¸ìš”!')) {
                // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                document.getElementById('ownerInput').value = '';
                document.getElementById('nameInput').value = '';
                document.getElementById('moodInput').value = '';
                document.getElementById('requestInput').value = '';
                document.getElementById('mottoInput').value = '';
                document.getElementById('extraInput1').value = '';
                document.getElementById('extraInput2').value = '';
                
                // í‘œì‹œ í…ìŠ¤íŠ¸ ì´ˆê¸°í™”
                document.getElementById('displayOwner').textContent = 'ë¬¸íŒ¨ ì£¼ì¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
                document.getElementById('displayName').textContent = 'ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”';
                document.getElementById('displayMood').textContent = '-';
                document.getElementById('displayRequest').textContent = '-';
                document.getElementById('displayMotto').textContent = '-';
                document.getElementById('displayExtraText1').textContent = '-';
                document.getElementById('displayExtraText2').textContent = '-';
                
                // ìŠ¤í‹°ì»¤ ì œê±°
                document.querySelectorAll('.sticker').forEach(s => s.remove());
                stickerCount = 0;
                
                // ë””ìì¸ ì´ˆê¸°í™”
                const doorSign = document.getElementById('doorSign');
                doorSign.className = 'bg-pink-200 p-6 font-handwriting size-medium border-4 border-solid border-gray-800';
                
                // ê¸€ì”¨ì²´ ì´ˆê¸°í™”
                document.querySelector('input[name="font"][value="font-handwriting"]').checked = true;
                
                // ì„ íƒ í‘œì‹œ ì´ˆê¸°í™”
                document.querySelectorAll('.color-option, .size-option, .border-option').forEach(opt => {
                    opt.classList.remove('ring-4', 'ring-2', 'ring-purple-400', 'bg-purple-50');
                });
                
                // ì²« ë²ˆì§¸ ìƒ‰ìƒê³¼ ë³´í†µ í¬ê¸° ì„ íƒ í‘œì‹œ
                document.querySelector('.color-option').classList.add('ring-4', 'ring-purple-400');
                document.querySelectorAll('.size-option')[1].classList.add('ring-4', 'ring-purple-400', 'bg-purple-50');
            }
        }
    </script>
</body>
</html>
